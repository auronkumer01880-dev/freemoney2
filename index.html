<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Earn & Reward App</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />

    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background: #f4f4f9;
            color: #1c1c1e;
            margin: 0;
            padding: 0;
        }
        #app { max-width: 500px; margin: auto; padding-bottom: 70px; }

        /* Profile */
        .profile-header { display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #ddd; }
        .profile-info { display: flex; align-items: center; gap: 15px; }
        #user-photo { width: 60px; height: 60px; border-radius: 50%; border: 2px solid #007aff; }
        .user-details h1 { font-size: 1.2rem; margin: 0; }
        .user-details p { font-size: 0.9rem; margin: 0; color: #555; }

        /* Pages */
        main { padding: 15px; }
        .page { display: none; }
        .page.active { display: block; }
        h2 { margin-bottom: 15px; }

        /* Stats */
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .stat-card { background: #fff; border: 1px solid #ddd; border-radius: 12px; padding: 15px; text-align: center; }
        .stat-card h3 { font-size: 0.9rem; color: #555; margin-bottom: 8px; }
        .stat-card p { font-size: 1.4rem; font-weight: bold; color: #007aff; margin: 0; }

        /* Referral */
        .referral-section { background: #fff; border: 1px solid #ddd; border-radius: 12px; padding: 15px; margin-top: 20px; text-align: center; }
        #referral-link { width: 100%; padding: 10px; border: 1px dashed #007aff; border-radius: 8px; margin: 10px 0; text-align: center; }
        #copy-ref-link-btn { background: #007aff; color: #fff; border: none; padding: 10px; border-radius: 8px; cursor: pointer; }

        /* Tasks */
        .task-container { background: #fff; border: 1px solid #ddd; border-radius: 12px; padding: 20px; margin-bottom: 15px; text-align: center; }
        .task-icon { font-size: 2.5rem; color: #007aff; margin-bottom: 10px; }
        .task-container h3 { margin: 5px 0; }
        .task-container p { color: #555; margin: 5px 0 15px; }
        .action-btn { width: 100%; padding: 12px; background: #007aff; color: #fff; border: none; border-radius: 8px; cursor: pointer; }

        /* Withdraw */
        #withdraw-form .form-group { margin-bottom: 15px; }
        #withdraw-form label { display: block; margin-bottom: 5px; font-weight: 600; }
        #withdraw-form input, #withdraw-form select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; }

        /* Bottom Navigation */
        .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; max-width: 500px; margin: auto; display: flex; justify-content: space-around; border-top: 1px solid #ddd; background: #fff; }
        .nav-btn { background: none; border: none; padding: 10px; font-size: 0.8rem; display: flex; flex-direction: column; align-items: center; cursor: pointer; color: #555; }
        .nav-btn i { font-size: 1.3rem; margin-bottom: 3px; }
        .nav-btn.active { color: #007aff; font-weight: bold; }
    </style>
</head>
<body>
    <div id="app">
        <!-- Profile -->
        <header class="profile-header">
            <div class="profile-info">
                <img id="user-photo" src="" alt="User Photo">
                <div class="user-details">
                    <h1 id="user-name">Loading...</h1>
                    <p>Balance: à§³<span id="user-points">0</span></p>
                </div>
            </div>
        </header>

        <main>
            <!-- Home -->
            <div id="home-page" class="page active">
                <h2>Dashboard</h2>
                <div class="stats-grid">
                    <div class="stat-card"><h3>Daily Ads Watched</h3><p><span id="daily-ads-watched">0</span>/25</p></div>
                    <div class="stat-card"><h3>Total Referrals</h3><p id="referral-count">0</p></div>
                </div>
                <div class="referral-section">
                    <h3>Refer & Earn</h3>
                    <p>Invite friends to earn bonus points.</p>
                    <input type="text" id="referral-link" readonly>
                    <button id="copy-ref-link-btn">Copy Referral Link</button>
                </div>
            </div>

            <!-- Tasks -->
            <div id="tasks-page" class="page">
                <h2>Complete Tasks</h2>
                <div class="task-container">
                    <i class="fas fa-video task-icon"></i>
                    <h3>Watch Ads</h3>
                    <p>Earn à§³5 for each ad.</p>
                    <button id="watch-ad-btn" class="action-btn">Watch Ad</button>
                </div>
                <div class="task-container">
                    <i class="fab fa-telegram task-icon"></i>
                    <h3>Join Telegram Channel</h3>
                    <p>Earn à§³20 bonus.</p>
                    <button id="join-channel-btn" class="action-btn">Join & Claim Bonus</button>
                </div>
                <div class="task-container">
                    <i class="fab fa-youtube task-icon"></i>
                    <h3>Subscribe YouTube</h3>
                    <p>Earn à§³30 bonus.</p>
                    <button id="join-youtube-btn" class="action-btn">Subscribe & Claim Bonus</button>
                </div>
            </div>

            <!-- Withdraw -->
            <div id="withdraw-page" class="page">
                <h2>Withdraw</h2>
                <p>Minimum 5 TK required to withdraw.</p>
                <form id="withdraw-form">
                    <div class="form-group">
                        <label for="withdraw-method">Method:</label>
                        <select id="withdraw-method" required>
                            <option value="Bkash">Bkash</option>
                            <option value="Nagad">Nagad</option>
                            <option value="Binance">Binance</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="account-number">Account Number/ID:</label>
                        <input type="text" id="account-number" required>
                    </div>
                    <div class="form-group">
                        <label for="amount">Amount:</label>
                        <input type="number" id="amount" required>
                    </div>
                    <button type="submit" id="withdraw-submit-btn" class="action-btn">Submit Request</button>
                </form>
            </div>
        </main>

        <!-- Bottom Nav -->
        <nav class="bottom-nav">
            <button class="nav-btn active" data-page="home-page"><i class="fas fa-home"></i><span>Home</span></button>
            <button class="nav-btn" data-page="tasks-page"><i class="fas fa-tasks"></i><span>Tasks</span></button>
            <button class="nav-btn" data-page="withdraw-page"><i class="fas fa-wallet"></i><span>Withdraw</span></button>
        </nav>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src='//libtl.com/sdk.js' data-zone='9809389' data-sdk='show_9809389'></script>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const tg = window.Telegram.WebApp;

        // Config
        const BOT_TOKEN = "7372978943:AAEYtHZGT6zXDfF1YPOVW3_6EL20MzkMFEU";
        const BOT_USERNAME = "DevilÂ ðŸ…";
        const ADMIN_CHAT_ID = "1360972796";
        const CHANNEL_LINK = "https://t.me/moneymintofficialbot1";
        const YOUTUBE_LINK = "https://www.youtube.com/channel/UCLiyY2BkpA3Xqvpzify4bvA";

        const DAILY_AD_LIMIT = 25;
        const POINTS_PER_AD = 5;
        const CHANNEL_BONUS = 20;
        const YOUTUBE_BONUS = 30;
        const MIN_WITHDRAW_POINTS = 5;

        // DOM
        const watchAdBtn = document.getElementById('watch-ad-btn');
        const joinChannelBtn = document.getElementById('join-channel-btn');
        const joinYoutubeBtn = document.getElementById('join-youtube-btn');
        const withdrawForm = document.getElementById('withdraw-form');
        const withdrawSubmitBtn = document.getElementById('withdraw-submit-btn');
        const referralLinkElem = document.getElementById('referral-link');
        const copyRefLinkBtn = document.getElementById('copy-ref-link-btn');

        // State
        let userState = { points: 0, dailyAdWatchCount: 0, hasJoinedChannel: false, hasJoinedYoutube: false };

        const updateUI = () => {
            document.getElementById('user-points').textContent = userState.points;
            document.getElementById('daily-ads-watched').textContent = userState.dailyAdWatchCount;
            document.getElementById('referral-count').textContent = 0;
            referralLinkElem.value = `https://t.me/${BOT_USERNAME}?start=ref_123`;

            if(userState.hasJoinedChannel) { joinChannelBtn.textContent = "Bonus Claimed"; joinChannelBtn.disabled = true; }
            if(userState.hasJoinedYoutube) { joinYoutubeBtn.textContent = "Bonus Claimed"; joinYoutubeBtn.disabled = true; }
        };

        // Watch Ad
        watchAdBtn.addEventListener('click', () => {
            if(userState.dailyAdWatchCount >= DAILY_AD_LIMIT) { tg.showAlert("Daily ad limit reached."); return; }
            show_9809389().then(() => {
                userState.points += POINTS_PER_AD;
                userState.dailyAdWatchCount++;
                updateUI();
                tg.showAlert(`You earned à§³${POINTS_PER_AD}`);
            });
        });

        // Join Telegram
        joinChannelBtn.addEventListener('click', () => {
            if(userState.hasJoinedChannel) return;
            window.open(CHANNEL_LINK, "_blank");
            setTimeout(() => {
                userState.points += CHANNEL_BONUS;
                userState.hasJoinedChannel = true;
                updateUI();
                tg.showAlert(`Bonus à§³${CHANNEL_BONUS} added!`);
            }, 2000);
        });

        // Join YouTube
        joinYoutubeBtn.addEventListener('click', () => {
            if(userState.hasJoinedYoutube) return;
            window.open(YOUTUBE_LINK, "_blank");
            setTimeout(() => {
                userState.points += YOUTUBE_BONUS;
                userState.hasJoinedYoutube = true;
                updateUI();
                tg.showAlert(`Bonus à§³${YOUTUBE_BONUS} added!`);
            }, 2000);
        });

        // Withdraw
        withdrawForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const amount = parseInt(document.getElementById('amount').value, 10);
            if(isNaN(amount) || amount < MIN_WITHDRAW_POINTS) { tg.showAlert(`Minimum withdraw à§³${MIN_WITHDRAW_POINTS}`); return; }
            if(amount > userState.points) { tg.showAlert("Insufficient balance."); return; }

            userState.points -= amount;
            updateUI();
            tg.showAlert("Withdraw request sent!");
            withdrawForm.reset();
        });

        // Copy Referral
        copyRefLinkBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(referralLinkElem.value);
            tg.showAlert("Referral link copied!");
        });

        // Navigation
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.getElementById(btn.dataset.page).classList.add('active');
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });

        updateUI();
    });
    </script>
</body>
</html>
